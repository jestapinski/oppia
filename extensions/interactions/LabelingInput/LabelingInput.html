<script src="{{cache_slug}}/extensions/interactions/LabelingInput/LabelingInput.js"></script>
<script src="{{cache_slug}}/extensions/interactions/LabelingInput/validator.js"></script>

<script type="text/ng-template" id="interaction/LabelingInput">
  <style>
    .image-click-container {
      background: #fff;
      padding: 8px;
      position: relative;
    }
    .oppia-image-click-img {
      cursor: pointer;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    @media screen and (max-width: 959px) {
      .code-repl-container {
        width: 100vw;
      }
      .oppia-image-click-img {
        max-width: 100vw;
      }
      .image-click-container {
        padding: 8px 0px;
      }
    }
  </style>
  <div ng-if="!imageUrl" translate="I18N_INTERACTIONS_IMAGE_CLICK_SELECT"></div>

  <div class="image-click-container" ng-if="imageUrl">
    <img ng-src="<[imageUrl]>"
         class="oppia-image-click-img"
         ng-click="onClickImage($event)"
         ng-mousemove="onMousemoveImage($event)">

    <div ng-if="highlightRegionsOnHover">
      <div ng-repeat="region in allRegions"
           style="
             height: <[getRegionDimensions($index).height]>px;
             width: <[getRegionDimensions($index).width]>px;
             left: <[getRegionDimensions($index).left]>px;
             top: <[getRegionDimensions($index).top]>px;
             pointer-events: none;
             position: absolute;
             display: <[getRegionDisplay(region.label)]>;
             background: rgba(0,0,255,0.5);
             z-index: 10;">
      </div>
    </div>
    <line
        ng-attr-x1="<[region.startX]>",
        ng-attr-y1="<[region.startY]>",
        ng-attr-x2="<[region.region.area[0][0] * getRegionDimensions($index).left]>",
        ng-attr-y2="<[region.region.area[0][1] * getRegionDimensions($index).top]>"
        style="stroke:rgb(0,0,0);stroke-width:2" 
    />
    </line>
<!--     <div ng-if="alwaysShowRegions">
      <div ng-repeat="region in allRegions"
          style="
            height: <[getRegionDimensions($index).height]>px;
             width: <[getRegionDimensions($index).width]>px;
             left: <[getRegionDimensions($index).left]>px;
             top: <[getRegionDimensions($index).top]>px;
             pointer-events: none;
             position: absolute;
             display: <[getRegionDisplay(region.label)]>;
             background: rgba(0,0,255,0.5);
             z-index: 10;
          ">
    </div>
  </div> -->

    </div>
  <line ng-repeat="region in allRegions",
        ng-attr-x1="<[region.startX]>",
        ng-attr-y1="<[region.startY]>",
        ng-attr-x2="<[region.region.area[0][0] * getImageWidth()]>",
        ng-attr-y2="<[region.region.area[0][1] * getImageHeight()]>"
        style="stroke:rgb(0,0,0);stroke-width:2" 
    />
    </line>
</script>

<script type="text/ng-template" id="response/LabelingInput">
  <div>
    <[clickRegionLabel]>
  </div>
</script>

<script type="text/ng-template" id="shortResponse/LabelingInput">
  <span><[clickRegionLabel]></span>
</script>
